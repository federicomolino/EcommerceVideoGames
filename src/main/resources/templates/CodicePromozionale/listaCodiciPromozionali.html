<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <title>VideoGames</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/CSS/CodicePromozionale.css">
</head>
<body>
<!--importo navbar-->
<div th:replace="~{navbar/navbar :: navbar}"></div>
<!-- Titolo -->
<div class="container">
  <div class="mb-3">
    <h5 class="fw-bold">üè∑ Codici Promozionali Presenti</h5>
    <hr>
  </div>

  <!-- Nessun codice -->
  <div th:if="${listCodiciPromozinali.isEmpty}">
    <div class="alert alert-warning text-center shadow-sm">
      Nessun Codice Promozionale presente
    </div>
  </div>

  <!-- Lista codici -->
  <div th:unless="${listCodiciPromozinali.isEmpty}">
    <div class="row">
      <div class="col-lg-6">

        <div class="card shadow-sm">
          <div class="card-header d-flex justify-content-between align-items-center">
            <strong>Lista Codici</strong>

            <div>
              <button type="submit"
                      form="formCodici"
                      class="btn btn-success btn-sm"
                      name="action"
                      value="active">
                Riattiva
              </button>
              <button type="submit"
                      form="formCodici"
                      class="btn btn-danger btn-sm"
                      name="action"
                      value="delete">
                Elimina
              </button>
            </div>
          </div>

          <div class="card-body p-0">

            <form id="formCodici"
                  method="post"
                  th:object="${formCodiciPromozionali}"
                  th:action="@{/gioco/addCodicePromozionale/listaCodici-delete}">

              <!-- Errore selezione -->
              <div th:if="${listCodici}" class="text-danger text-center my-2">
                <strong th:text="${listCodici}">
                  Non √® stato selezionato nessun codice
                </strong>
              </div>

              <ul class="list-group list-group-flush">
                <li class="list-group-item"
                    th:each="CodiciPromozionali : ${listCodiciPromozinali}">

                  <div class="form-check">
                    <input class="form-check-input"
                           type="checkbox"
                           name="selectedIds"
                           th:value="${CodiciPromozionali.idCodicePromozionle}"
                           th:id="'checkbox_' + ${CodiciPromozionali.idCodicePromozionle}">
                    <label class="form-check-label fw-semibold"
                           th:for="'checkbox_' + ${CodiciPromozionali.idCodicePromozionle}"
                           th:text="${CodiciPromozionali.codicePromozionale}">
                      Codice
                    </label>
                  </div>

                  <div class="ms-4 mt-1">

                    <!-- Stato -->
                    <div th:if="${CodiciPromozionali.usato == true}">
                      <span class="status-used">‚ùå Codice gi√† utilizzato</span>
                    </div>
                    <div th:if="${CodiciPromozionali.usato == false}">
                      <span class="status-available">‚úÖ Codice non utilizzato</span>
                    </div>

                    <!-- Gioco -->
                    <div class="text-muted small">
                      <span th:text="'Titolo Gioco: ' + ${CodiciPromozionali.gioco.titolo}">
                        Titolo Gioco
                      </span>
                    </div>

                  </div>
                </li>
              </ul>

            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
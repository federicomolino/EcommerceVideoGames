<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <title>InfoGioco</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/CSS/InfoGiocoCSS/InfoGioco.css">
</head>
<body>
<!--importo navbar-->
<div th:replace="~{navbar/navbar :: navbar}"></div>
<div class="container mt-4">

  <!-- SUCCESS MESSAGE -->

  <div th:if="${successMessage}" class="alert alert-success d-flex justify-content-between col-6 mx-auto">
    <span th:text="${successMessage}">OK</span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>

  <!-- HEADER -->

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="title-bar" th:text="'Info: ' + ${gioco.titolo}">Info</h3>

    <div sec:authorize="hasAuthority('ADMIN')" class="d-flex align-items-center gap-2">
      <span class="fw-semibold">Modifica Gioco</span>
      <a class="btn btn-outline-primary btn-sm"
         th:href="@{/gioco/editGioco/{idGioco}(idGioco=${gioco.idGioco})}">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
          <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293z"/>
          <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
        </svg>
      </a>
    </div>

  </div>

  <div class="row g-4">

    <!-- INFO GIOCO -->
    <div class="col-4">
      <div class="card info-card p-3">
        <ul class="list-unstyled mb-0">
          <li class="mb-3">
            <h6>Descrizione</h6>
            <span th:text="${gioco.descrizione}"></span>
          </li>
          <li class="mb-3">
            <h6>Prezzo</h6>
            <span th:text="${gioco.prezzo}"></span>
          </li>
          <li class="mb-3">
            <h6>Codice Prodotto</h6>
            <span th:text="${gioco.codiceProdotto}"></span>
          </li>
          <li class="mb-3">
            <h6>Quantit√†</h6>
            <span th:text="${gioco.quantita}" class="badge badge-blue"></span>
          </li>
          <li th:if="${!gioco.softwareHouse.isEmpty}" class="mb-3">
            <h6>Software House</h6>
            <span th:text="${gioco.softwareHouse}"></span>
          </li>
          <li th:if="${gioco.dataUscitaGioco != null}">
            <h6>Data Uscita</h6>
            <span th:text="${gioco.dataUscitaGioco}"></span>
          </li>
        </ul>
      </div>
    </div>

    <!-- PIATTAFORME -->
    <div class="col-4" th:unless="${listPiattaforma.isEmpty}">
      <div class="card info-card p-3">
        <h5 class="mb-3">Disponibile su</h5>
        <ul class="list-group list-group-flush">
          <li th:each="piattaforma : ${listPiattaforma}"
              class="list-group-item"
              th:text="${piattaforma.nomePiattaforma}">
          </li>
        </ul>
      </div>
    </div>

    <!-- RECENSIONI -->
    <div>

      <div th:if="${listRecensioni.isEmpty}" class="alert alert-warning">
        Nessuna recensione presente
        <a th:href="@{/gioco/addRecensione/{id}(id=${gioco.idGioco})}" class="alert-link">Aggiungila</a>
      </div>

      <div th:unless="${listRecensioni == null or listRecensioni.isEmpty}" class="card info-card p-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h5 class="mb-0">Recensioni</h5>
          <a th:href="@{/gioco/addRecensione/{id}(id=${gioco.idGioco})}"
             class="btn btn-sm btn-light">Aggiungi</a>
        </div>

        <div class="scroll-box">
          <div th:each="recensioni : ${listRecensioni}" class="mb-3">
            <div class="d-flex justify-content-between small text-muted">
              <span th:text="${recensioni.utente.username}"></span>
              <span th:text="${recensioni.dataRecensione}"></span>
            </div>
            <textarea class="form-control mt-1" rows="3" readonly
                      th:text="${recensioni.recensione}"></textarea>
          </div>
        </div>
      </div>

    </div>
    ```

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>